#N canvas 368 71 911 906 10;
#X obj 41 706 unpack f f f;
#X obj 41 731 vsl 16 136 -1 1 0 0 empty empty empty 0 -9 0 10 #fcfcfc #000000 #000000 0 1;
#X obj 71 731 vsl 16 136 -1 1 0 0 empty empty empty 0 -9 0 10 #fcfcfc #000000 #000000 0 1;
#X obj 101 731 vsl 16 136 -1 1 0 0 empty empty empty 0 -9 0 10 #fcfcfc #000000 #000000 0 1;
#X obj 150 706 unpack f f f;
#X obj 150 731 vsl 16 136 -540 540 0 0 empty empty empty 0 -9 0 10 #fcfcfc #000000 #000000 0 1;
#X obj 180 731 vsl 16 136 -540 540 0 0 empty empty empty 0 -9 0 10 #fcfcfc #000000 #000000 0 1;
#X obj 210 731 vsl 16 136 -540 540 0 0 \$0-gz empty empty 0 -9 0 10 #fcfcfc #000000 #000000 0 1;
#X obj 266 706 unpack f f f;
#X obj 266 731 vsl 16 136 -180 180 0 0 empty empty empty 0 -9 0 10 #fcfcfc #000000 #000000 0 1;
#X obj 296 731 vsl 16 136 -180 180 0 0 empty empty empty 0 -9 0 10 #fcfcfc #000000 #000000 0 1;
#X obj 326 731 vsl 16 136 -180 180 0 0 empty empty empty 0 -9 0 10 #fcfcfc #000000 #000000 0 1;
#X obj 92 567 print status;
#X text 120 723 1;
#X text 120 859 -1;
#X text 46 687 accel (1G);
#X text 263 687 angle (degrees);
#X text 355 725 180;
#X text 352 859 -180;
#X obj 229 567 route device;
#X obj 229 588 route wit;
#X msg 158 514 connect \$1;
#X text 476 99 connect device via address or id;
#X msg 274 546 1;
#X msg 235 493 scan;
#X obj 235 514 t a b;
#X text 274 492 autoconnect mechanism (waiting for a wit device and creating connection with it), f 30;
#X text 152 687 gyro (deg/s);
#X text 550 33 External to connect WIT WT9011DCL-BTLE with puredata;
#X text 730 50 See www.wit-motion.com;
#X obj 229 546 spigot;
#X msg 80 39 scan;
#X msg 80 70 results;
#X msg 80 100 connect 4536479B-F8A4-6902-923A-CCEAE294ECDB;
#X msg 80 307 calibrate;
#X msg 130 337 zzero;
#X msg 358 100 connect WT901BLE67;
#X msg 80 130 disconnect;
#X msg 250 160 rate 0;
#X text 150 129 disconnect device;
#X text 295 160 set stream rate of data (except quaternion) in Hz;
#X text 331 189 set quaternion poll rate in Hz;
#X text 334 242 controls the digital filter cutoff frequency for the sensor's accelerometer and gyroscope data, f 48;
#X text 177 271 controls the sensor fusion algorithm - how many sensors are used for orientation calculation., f 68;
#X text 148 301 inits calibration on the sensor side (takes ~10s and requires stable position), f 41;
#X msg 80 367 magcal-start;
#X msg 167 367 magcal-stop;
#X text 243 366 calibration for 9-axis mode;
#X text 116 33 scan for bluetooth devices. devices are output on the status outlet during discovery, f 44;
#X msg 257 247 bandwidth 1;
#X msg 80 277 axis 6;
#X msg 129 277 axis 9;
#X msg 80 247 bandwidth 42;
#X msg 165 247 bandwidth 256;
#X obj 41 55 t a;
#X obj 41 86 t a;
#X obj 41 116 t a;
#X obj 41 146 t a;
#X obj 41 176 t a;
#X obj 41 205 t a;
#X obj 41 263 t a;
#X obj 41 293 t a;
#X obj 41 323 t a;
#X obj 41 353 t a;
#X obj 41 383 t a;
#X obj 80 398 hradio 16 1 0 2 empty empty empty 0 -8 0 10 #fcfcfc #000000 #000000 0;
#X msg 80 419 orientation \$1;
#X msg 81 337 xyzero;
#X text 168 336 zero x/y- and z-axis angle;
#X msg 80 189 poll quat 10;
#X msg 165 189 poll quat 100;
#X msg 256 189 poll quat 0;
#X obj 392 706 unpack f f f;
#X obj 392 731 vsl 16 136 -100 100 0 0 empty empty empty 0 -9 0 10 #fcfcfc #000000 #000000 0 1;
#X obj 422 731 vsl 16 136 -100 100 0 0 empty empty empty 0 -9 0 10 #fcfcfc #000000 #000000 0 1;
#X obj 452 731 vsl 16 136 -100 100 0 0 empty empty empty 0 -9 0 10 #fcfcfc #000000 #000000 0 1;
#X obj 748 731 vsl 16 136 -1 1 0 0 empty empty empty 0 -9 0 10 #fcfcfc #000000 #000000 0 1;
#X obj 778 731 vsl 16 136 -1 1 0 0 empty empty empty 0 -9 0 10 #fcfcfc #000000 #000000 0 1;
#X obj 808 731 vsl 16 136 -1 1 0 0 empty empty empty 0 -9 0 10 #fcfcfc #000000 #000000 0 1;
#X obj 838 730 vsl 16 136 -1 1 0 0 empty empty empty 0 -9 0 10 #fcfcfc #000000 #000000 0 1;
#X obj 748 706 unpack f f f f;
#X text 858 723 1;
#X text 858 859 -1;
#X msg 135 160 rate 100;
#X obj 342 731 vsl 8 136 -180 180 0 0 empty empty empty 0 -9 0 10 #fcfcfc #dfdfdf #000000 0 1;
#X floatatom 723 560 3 0 0 1 fps \$0-framerate - 16;
#X obj 41 628 route accel gyro angle mag disp speed quat timestamp, f 133;
#X listbox 736 656 17 0 0 0 - - \$0-time 0;
#X obj 510 706 unpack f f f;
#X obj 510 731 vsl 16 136 -1000 1000 0 0 empty empty empty 0 -9 0 10 #fcfcfc #000000 #000000 0 1;
#X obj 540 731 vsl 16 136 -1000 1000 0 0 empty empty empty 0 -9 0 10 #fcfcfc #000000 #000000 0 1;
#X obj 570 731 vsl 16 136 -1000 1000 0 0 empty empty empty 0 -9 0 10 #fcfcfc #000000 #000000 0 1;
#X obj 631 706 unpack f f f;
#X obj 631 731 vsl 16 136 -1000 1000 0 0 empty empty empty 0 -9 0 10 #fcfcfc #000000 #000000 0 1;
#X obj 661 731 vsl 16 136 -1000 1000 0 0 empty empty empty 0 -9 0 10 #fcfcfc #000000 #000000 0 1;
#X obj 691 731 vsl 16 136 -1000 1000 0 0 empty empty empty 0 -9 0 10 #fcfcfc #000000 #000000 0 1;
#N canvas 752 754 484 280 z_from_gyro 0;
#X obj 30 178 outlet;
#X obj 31 89 +;
#X obj 60 89 mod 360;
#X obj 30 112 - 180;
#X obj 32 60 / 24;
#X text 86 148 little patch to check whether we can derive valid angles by integrating the gyro data;
#X obj 33 36 r \$0-gz;
#X obj 91 34 r \$0-framerate;
#X connect 1 0 3 0;
#X connect 1 0 2 0;
#X connect 2 0 1 1;
#X connect 3 0 0 0;
#X connect 4 0 1 0;
#X connect 6 0 4 0;
#X connect 7 0 4 1;
#X restore 351 649 pd z_from_gyro;
#N canvas 92 117 554 243 additional 0;
#X msg 50 42 save;
#X msg 90 42 restore;
#X msg 48 85 baud \$1;
#X msg 57 131 mag;
#X msg 89 131 quat;
#X text 101 83 sets the baud rate \, which doesn't have any effect and is fixed on the device side anyway;
#X text 142 42 save current settings to flash or restore to defaults;
#X text 124 130 single shot polls;
#X obj 52 178 s \$0-witsensor;
#X connect 0 0 8 0;
#X connect 1 0 8 0;
#X connect 2 0 8 0;
#X connect 3 0 8 0;
#X connect 4 0 8 0;
#X restore 277 450 pd additional messages;
#X obj 41 435 t a;
#X obj 41 466 t a;
#X text 176 395 0: horizontal installation \; 1: vertical installation \;;
#X obj 41 234 t a;
#X msg 256 218 poll mag 0;
#X text 568 183 in order to achieve reasonable update rates when polling \, it's better to set the stream rate to 0, f 49;
#X msg 80 218 poll mag 10;
#X obj 377 398 hradio 16 1 0 4 empty empty empty 0 -8 0 10 #fcfcfc #000000 #000000 0;
#X msg 377 419 outputmode \$1;
#X text 469 392 0: accel gyro angle \; 1: displacement speed angle \; 2: accel gyro timestamp z-angle \; 3: displacement speed timestamp z-angle \;;
#X msg 82 450 battery;
#X msg 138 450 temp;
#X text 174 70 (re-)output or clear current result list;
#X msg 135 70 clear;
#X msg 177 450 time;
#X msg 213 450 version;
#X obj 51 506 r \$0-witsensor;
#X msg 165 218 poll mag 100;
#X text 331 219 set magnetometer poll rate (need 9-axis!);
#X text 746 687 quaternion (wxyz);
#X text 231 725 540;
#X text 228 859 -540;
#X text 473 725 100;
#X text 470 859 -100;
#X text 375 687 magnetic field (uT);
#X text 630 687 speed (mm/s);
#X text 509 687 displacement (mm);
#X text 589 723 1000;
#X text 589 859 -1000;
#X text 709 723 1000;
#X text 709 859 -1000;
#X obj 41 530 witsensor;
#N canvas 0 22 450 278 (subpatch) 0;
#X array \$0-data 1000 float 2;
#A color 0;
#A width 2;
#X coords 0 1 1000 0 200 20 1;
#X restore 517 562 graph;
#N canvas 1116 304 313 363 calculate 0;
#X obj 44 228 f;
#X obj 75 228 + 1;
#X obj 59 170 t b b;
#X obj 86 271 f;
#X msg 59 190 0;
#X obj 59 95 metro 1000;
#X obj 59 74 loadbang;
#X obj 59 120 bng 16 250 50 0 empty empty empty 0 -8 0 10 #fcfcfc #000000 #000000;
#X obj 86 304 s \$0-framerate;
#X obj 148 271 tabwrite \$0-data;
#X obj 192 189 t b b a;
#X obj 148 244 f;
#X msg 164 216 1;
#X msg 195 216 0;
#X msg 192 147 0 \, 1000 1000;
#X obj 192 168 line 0 1;
#X obj 44 43 r \$0-update;
#X connect 0 0 1 0;
#X connect 0 0 3 1;
#X connect 1 0 0 1;
#X connect 2 0 4 0;
#X connect 2 1 3 0;
#X connect 3 0 8 0;
#X connect 4 0 0 0;
#X connect 5 0 7 0;
#X connect 6 0 5 0;
#X connect 7 0 2 0;
#X connect 7 0 14 0;
#X connect 10 0 13 0;
#X connect 10 1 11 0;
#X connect 10 2 9 1;
#X connect 11 0 9 0;
#X connect 12 0 11 1;
#X connect 13 0 11 1;
#X connect 14 0 15 0;
#X connect 15 0 10 0;
#X connect 16 0 0 0;
#X connect 16 0 12 0;
#X restore 517 588 pd calculate rate;
#X text 514 515 unfortunately (at least on macOS) \, the maximum update rate seems to be limited to 24fps with Bluetooth Low Enery.;
#X obj 238 649 t a b;
#X msg 80 160 rate 50;
#X msg 198 160 rate 5;
#N canvas 63 88 477 239 more 0;
#X obj 44 87 vline~;
#X obj 44 128 dac~;
#X obj 44 107 *~;
#X obj 89 87 tgl 16 0 empty empty empty 0 -8 0 10 #fcfcfc #000000 #000000 0 1;
#X text 110 86 listen to updates;
#X msg 44 66 0.04 \, 0 0 0.04;
#X obj 246 65 unpack;
#X obj 279 119 t a a;
#X obj 280 144 -;
#X obj 279 98 spigot;
#X obj 313 78 tgl 16 0 empty empty empty 0 -8 0 10 #fcfcfc #000000 #000000 0 1;
#X text 332 78 print intervals;
#X obj 280 165 print interval (ms);
#X obj 246 44 r \$0-time;
#X obj 44 45 r \$0-update;
#X connect 0 0 2 0;
#X connect 2 0 1 0;
#X connect 3 0 2 1;
#X connect 5 0 0 0;
#X connect 6 1 9 0;
#X connect 7 0 8 1;
#X connect 7 1 8 0;
#X connect 8 0 12 0;
#X connect 9 0 7 0;
#X connect 10 0 9 1;
#X connect 13 0 6 0;
#X connect 14 0 5 0;
#X restore 92 588 pd more;
#X obj 277 649 s \$0-update;
#X connect 0 0 1 0;
#X connect 0 1 2 0;
#X connect 0 2 3 0;
#X connect 4 0 5 0;
#X connect 4 1 6 0;
#X connect 4 2 7 0;
#X connect 8 0 9 0;
#X connect 8 1 10 0;
#X connect 8 2 11 0;
#X connect 19 0 20 0;
#X connect 20 0 21 0;
#X connect 21 0 129 0;
#X connect 23 0 30 1;
#X connect 24 0 25 0;
#X connect 25 0 129 0;
#X connect 25 1 23 0;
#X connect 30 0 19 0;
#X connect 31 0 54 0;
#X connect 32 0 55 0;
#X connect 33 0 56 0;
#X connect 34 0 62 0;
#X connect 35 0 63 0;
#X connect 36 0 56 0;
#X connect 37 0 57 0;
#X connect 38 0 58 0;
#X connect 45 0 64 0;
#X connect 46 0 64 0;
#X connect 49 0 60 0;
#X connect 50 0 61 0;
#X connect 51 0 61 0;
#X connect 52 0 60 0;
#X connect 53 0 60 0;
#X connect 54 0 55 0;
#X connect 55 0 56 0;
#X connect 56 0 57 0;
#X connect 57 0 58 0;
#X connect 58 0 59 0;
#X connect 59 0 101 0;
#X connect 60 0 61 0;
#X connect 61 0 62 0;
#X connect 62 0 63 0;
#X connect 63 0 64 0;
#X connect 64 0 98 0;
#X connect 65 0 66 0;
#X connect 66 0 98 0;
#X connect 67 0 63 0;
#X connect 69 0 59 0;
#X connect 70 0 59 0;
#X connect 71 0 59 0;
#X connect 72 0 73 0;
#X connect 72 1 74 0;
#X connect 72 2 75 0;
#X connect 80 0 76 0;
#X connect 80 1 77 0;
#X connect 80 2 78 0;
#X connect 80 3 79 0;
#X connect 83 0 58 0;
#X connect 86 0 0 0;
#X connect 86 1 4 0;
#X connect 86 2 133 0;
#X connect 86 3 72 0;
#X connect 86 4 88 0;
#X connect 86 5 92 0;
#X connect 86 6 80 0;
#X connect 86 7 87 0;
#X connect 88 0 89 0;
#X connect 88 1 90 0;
#X connect 88 2 91 0;
#X connect 92 0 93 0;
#X connect 92 1 94 0;
#X connect 92 2 95 0;
#X connect 96 0 84 0;
#X connect 98 0 99 0;
#X connect 99 0 129 0;
#X connect 101 0 60 0;
#X connect 102 0 101 0;
#X connect 104 0 101 0;
#X connect 105 0 106 0;
#X connect 106 0 98 0;
#X connect 108 0 99 0;
#X connect 109 0 99 0;
#X connect 111 0 55 0;
#X connect 112 0 99 0;
#X connect 113 0 99 0;
#X connect 114 0 129 0;
#X connect 115 0 101 0;
#X connect 129 0 86 0;
#X connect 129 1 12 0;
#X connect 129 1 30 0;
#X connect 133 0 8 0;
#X connect 133 1 137 0;
#X connect 134 0 58 0;
#X connect 135 0 58 0;
